# macOS System Maintenance Tools - Changelog

이 문서는 macOS System Maintenance Tools 프로젝트의 모든 주요 변경 사항을 기록합니다.

## [v3.1] - 2024-12-28

### 수정/Fixed

- **안드로이드 스튜디오 버전 추출**: brew info 출력 형식 변화에 대응한 다중 fallback 방식 구현
- **사용자 입력 처리**: 확인 프롬프트 기본값을 'y'로 변경하여 사용성 개선
- **DRY RUN 모드**: 안드로이드 스튜디오 버전 정보도 표시하도록 개선
- **설치 감지**: `/Applications/Android Studio.app` 경로도 확인하여 감지 정확도 향상

### 개선/Improved

- **버전 추출 안정성**: 3단계 fallback 방식으로 버전 정보 추출 실패율 최소화
- **사용자 경험**: 엔터 키만으로 업데이트 진행 가능하도록 개선
- **정보 제공**: DRY RUN 모드에서도 현재 버전 정보 확인 가능

### 스타일/Style

- **shebang 통일**: 사용자 환경에 맞춰 `#!/bin/zsh`로 통일
- **크로스 쉘 호환성**: bash와 zsh 양쪽에서 모두 작동하는 코드 구현
- **런타임 쉘 감지**: `ZSH_VERSION` 변수를 통한 동적 쉘 기능 선택
- **하위 호환성 유지**: 기존 bash 환경에서도 정상 작동

## [v3.0] - 2024-12-28

### 신규/Added

- **system_upgrade.sh** 완전한 도움말 시스템 (`--help` 플래그)
- **DRY RUN 모드** 지원으로 안전한 미리보기 기능 (`--dry-run`)
- **자동 실행 모드** 추가 (`--auto-yes` 옵션)
- **세밀한 제어 옵션들**: `--no-brew`, `--no-cask`, `--no-topgrade`, `--no-android`, `--no-apps`
- **UI 표준화 함수들**: `print_section_header()`, `print_section_divider()`, `print_subsection_header()`
- **안전한 파일 작업 함수들**: `safe_remove()`, `safe_clear_cache()`, `create_backup()`
- **보호된 경로 시스템**: 중요 시스템 디렉토리 삭제 방지

### 개선/Improved

- **모든 스크립트의 UI 요소 통일**: 일관된 섹션 헤더, 구분선, 메시지 형식
- **파괴적 명령어 안전성 강화**: `rm -rf` 직접 호출을 안전한 함수로 교체
- **사용자 확인 시스템 강화**: 중요한 작업 전 확인 프롬프트 및 타임아웃 지원
- **에러 처리 개선**: 더 상세한 오류 메시지와 복구 옵션 제공
- **로깅 시스템 향상**: 표준화된 로그 레벨과 메시지 형식

### 보안/Security

- **경로 정규화**: `realpath`를 사용한 경로 검증
- **보호된 디렉토리 목록**: `/`, `/usr`, `/System`, `/Applications`, `$HOME` 등 보호
- **사용자 권한 확인**: 중요한 작업 전 권한 및 확인 절차 강화
- **안전한 임시 파일 처리**: `mktemp` 사용과 적절한 권한 설정

### 수정/Fixed

- **Chrome/Firefox/Safari 캐시 정리**: 안전한 캐시 정리 함수로 개선
- **시스템 캐시 정리**: 개별 항목별 안전한 정리로 변경
- **Xcode DerivedData 정리**: 보호된 삭제 함수 사용
- **iOS Simulator 캐시**: 안전한 캐시 정리 적용

### 문서화/Documentation

- **help 메시지 표준화**: 모든 옵션과 사용 예시 포함
- **사용법 가이드 개선**: DRY RUN과 자동 모드 설명 추가
- **권장사항 추가**: 시스템 재시작, 정기 실행, 백업 확인 안내

## [v2.6] - 2025-06-26

### 개선/Improved (업그레이드 유틸리티)

- 임시 디렉토리 권한 설정 및 오류 처리 강화
- 안드로이드 스튜디오를 topgrade에서 제외하고 별도 관리 옵션 제공
- 에러 처리 및 복구 방법 개선
- 코드 구조화 및 가독성 향상을 위한 섹션 구분선 추가
- 파일 검색 및 처리 로직 성능 최적화

### 수정/Fixed (업그레이드 유틸리티)

- 임시 디렉토리 생성 실패 시 더 명확한 오류 메시지 제공
- 안드로이드 스튜디오 업데이트 시 사용자 선택 옵션 추가
- Applications 디렉토리 접근 실패 시 안전한 처리

### 개선/Improved (정리 유틸리티)

- 전반적인 스크립트 안정성 및 기능 개선
- 오류 처리 메커니즘 강화
- 로깅 시스템 개선
- 성능 최적화

### 수정/Fixed (정리 유틸리티)

- 다양한 시스템 환경에서의 호환성 문제 해결
- 권한 관련 오류 처리 개선

## [v2.5] - 2025-05-20 (정리 유틸리티)

### 개선/Improved

- 스크립트 실행 안정성 대폭 강화
- 타임아웃 처리를 통한 무한 실행 방지
- 모든 섹션에 오류 복구 및 계속 진행 로직 추가
- 스크립트 중단 시 자원 정리를 위한 트랩 핸들러 구현
- 복잡한 조건문 구조 단순화 및 가독성 개선

### 추가/Added

- `--no-android`, `--no-docker`, `--no-npm`, `--no-brew` 등 세분화된 스킵 옵션
- Docker 실행 여부 자동 감지
- 플랫폼 호환성 개선 (numfmt 명령어 의존성 제거)
- 단계별 성공/실패 상세 로깅

### 버그 수정/Fixed

- Android Studio 정리 섹션에서 스크립트 중단 문제 해결
- node_modules 검색 무한 대기 문제 수정
- Docker 명령 실패 시 스크립트 중단 방지

## [미발표/Unreleased]

### 추가/Added

- OpenWebUI 컨테이너 및 데이터 볼륨 정리 기능
- 볼륨 크기 계산 및 보고 기능 강화
- OpenWebUI 데이터에 대한 세분화된 정리 옵션

### 개선/Improved

- 서브섹션 번호 지정 표준화
- 공간 절약 계산 및 보고 개선
- 스크립트 간 코드 패턴 일치화
- 오류 처리 메커니즘 통합
- 문서 구조 최적화

## [v2.4] - 2025-05-15 (업그레이드 유틸리티)

### 추가/Added

- 자동 시스템 상태 확인
- 캐시 상태 관리 시스템
- Homebrew 디렉토리 권한 복구

### 개선/Improved

- 오류 복구 메커니즘
- 오류 로깅 및 해결 가이드

## [v2.3] - 2025-05-20 (업그레이드 유틸리티)

### 추가/Added

- Ruby 버전 호환성 검사

### 변경/Changed

- /tmp 디렉토리 사용 강제
- 홈 디렉토리 폴백 제거

### 개선/Improved

- 권한 검증 시스템
- 해결책이 포함된 오류 메시지

## [v2.0] - 2025-04-14

### 추가/Added (정리 유틸리티)

- 안드로이드 스튜디오 정리 기능
- AVD 파일 보호 구현
- 강화된 로깅 시스템

### 추가/Added (업그레이드 유틸리티)

- 강화된 로깅 시스템
- 개선된 오류 처리
- 자동 복구 메커니즘

## [v1.3] - 2023-07-15

### 추가/Added (정리 유틸리티)

- .DS_Store 파일 정리 기능
- 긴 작업에 대한 진행 표시기

### 추가/Added (업그레이드 유틸리티)

- 자동 앱 감지
- 설치 확인

### 개선/Improved

- 패키지 관리 시스템

## [v1.2] - 2023-06-10 (정리 유틸리티)

### 추가/Added

- node_modules 디렉토리 정리
- Yarn 캐시 정리

### 개선/Improved

- 패키지 관리자용 오류 처리

## [v1.1] - 2023-05-25 (정리 유틸리티)

### 추가/Added

- Docker 정리 기능

### 개선/Improved

- 로깅 시스템
- 오류 보고

## [v1.0] - 2023-05-20

### 최초 릴리스/Initial Release (정리 유틸리티)

- 기본 시스템 정리 기능
- Homebrew 정리
- npm 캐시 정리
- 시스템 로그 관리

### 최초 릴리스/Initial Release (업그레이드 유틸리티)

- 기본 업그레이드 기능
- Homebrew 통합
- 시스템 업데이트 확인
